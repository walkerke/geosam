---
title: "Interactive workflows"
format: html
editor: visual
---

geosam includes interactive tools for exploring imagery, running detections, and reviewing results. These are built with Shiny and mapgl.

### Exploring satellite imagery

`sam_explore()` opens an interactive map for discovering and detecting objects:

``` r
library(geosam)

result <- sam_explore(source = "mapbox")
```

<!-- TODO: Screenshot of sam_explore interface -->

The interface lets you:

- Navigate to any location
- Enter text prompts to detect objects
- Draw points for point-based detection
- Draw example boxes for exemplar detection
- Review and export results

When you click "Done", results are returned as a geosam object.

### Exploring regular images

`sam_explore_image()` provides similar functionality for photos:

``` r
result <- sam_explore_image("photo.jpg")
```

<!-- TODO: Screenshot of sam_explore_image -->

### Viewing detection results

After running `sam_detect()`, use `sam_view()` to review results:

``` r
pools <- sam_detect(
  bbox = c(-118.42, 34.08, -118.40, 34.10),
  text = "swimming pool",
  zoom = 18
)

sam_view(pools)
```

<!-- TODO: Screenshot of sam_view -->

The viewer includes:

- Interactive map with satellite basemap
- Confidence filtering slider
- Bounding box outline showing extraction area
- Click popups with confidence scores
- GeoJSON export

### Customizing the viewer

``` r
# Custom colors
sam_view(pools, fill = "#3B82F6", border = "#1D4ED8")

# Adjust opacity
sam_view(pools, fill_opacity = 0.7)

# Different basemap
sam_view(pools, source = "esri")
```

### Image viewer

For non-georeferenced images, use `sam_view_image()`:

``` r
dogs <- sam_image("photo.jpg", text = "dog")
sam_view_image(dogs)
```

<!-- TODO: Describe sam_view_image features -->

### Workflow examples

<!-- TODO: Example workflows -->
<!-- - Explore → detect → filter → export -->
<!-- - Programmatic detect → interactive review → export -->
